<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Smart Inventory</title>
<style>
:root{
--bg:#000;--card:#1c1c1e;--text:#fff;--sub:#9e9e9e;
--blue:#0a84ff;--green:#30d158;--orange:#ff9f0a;--red:#ff453a;
}
*{box-sizing:border-box}
body{margin:0;font-family:-apple-system;background:var(--bg);color:var(--text)}
header{padding:16px;font-size:20px;font-weight:700;text-align:center}
.tabbar{
position:fixed;bottom:0;left:0;right:0;height:60px;
display:flex;background:#111;border-top:1px solid #222}
.tabbar button{
flex:1;border:none;background:none;color:var(--sub);font-size:13px}
.tabbar button.active{color:var(--blue)}
main{padding:16px 16px 80px}
.card{
background:var(--card);border-radius:16px;padding:14px;margin-bottom:12px}
.row{display:flex;gap:12px;align-items:center}
img{width:70px;height:70px;border-radius:14px;object-fit:cover;background:#333}
.badge{padding:4px 10px;border-radius:10px;font-size:12px}
.green{background:var(--green)}
.orange{background:var(--orange)}
.red{background:var(--red)}
input,button{
width:100%;padding:12px;border-radius:12px;border:none;margin-top:8px}
input{background:#2c2c2e;color:#fff}
button.primary{background:var(--blue);color:#fff}
button.danger{background:var(--red);color:#fff}
.hidden{display:none}
.small{color:var(--sub);font-size:13px}
</style>
</head>

<body>
<header>üì¶ Smart Inventory</header>

<main>
<!-- DASHBOARD -->
<section id="dash">
<div class="card">
<b>T·ªïng quan</b>
<div id="alert" class="small"></div>
</div>
</section>

<!-- INVENTORY -->
<section id="inv" class="hidden">
<div class="card">
<input id="search" placeholder="üîç G√µ t√¨m m·∫∑t h√†ng" oninput="render()">
</div>
<div id="list"></div>

<div class="card">
<b>‚ûï Th√™m m·∫∑t h√†ng</b>
<input id="name" placeholder="T√™n">
<input id="unit" placeholder="ƒê∆°n v·ªã (c√°i/kg/th√πng‚Ä¶)">
<input id="min" type="number" placeholder="T·ªìn t·ªëi thi·ªÉu">
<input id="img" type="file" accept="image/*">
<button class="primary" onclick="add()">Th√™m</button>
</div>
</section>

<!-- RECEIPT -->
<section id="bill" class="hidden">
<div class="card">
<b>üßæ Phi·∫øu xu·∫•t (gom)</b>
<div id="receipt"></div>
<button class="primary" onclick="print()">In / L∆∞u PDF</button>
</div>
</section>
</main>

<div class="tabbar">
<button class="active" onclick="tab('dash',this)">T·ªïng quan</button>
<button onclick="tab('inv',this)">Kho</button>
<button onclick="tab('bill',this)">Phi·∫øu</button>
</div>

<script>
let items=JSON.parse(localStorage.items||"[]");
let out=[];

function tab(id,el){
document.querySelectorAll("section").forEach(s=>s.classList.add("hidden"));
document.getElementById(id).classList.remove("hidden");
document.querySelectorAll(".tabbar button").forEach(b=>b.classList.remove("active"));
el.classList.add("active");
render();
}

function save(){localStorage.items=JSON.stringify(items)}

function add(){
let f=img.files[0]; if(!f)return alert("Ch·ªçn ·∫£nh");
let r=new FileReader();
r.onload=()=>{
items.push({
name:name.value,unit:unit.value,min:+min.value||0,qty:0,img:r.result
});
save();name.value=unit.value=min.value="";render();
};
r.readAsDataURL(f);
}

function move(i,delta){
items[i].qty+=delta;
if(delta<0) out.push(items[i].name+" : "+Math.abs(delta)+" "+items[i].unit);
save();render();
}

function render(){
let l=document.getElementById("list");l.innerHTML="";
let low=0;
items.forEach((it,i)=>{
if(!it.name.toLowerCase().includes(search.value.toLowerCase()))return;
let badge=it.qty<=0?"red":it.qty<=it.min?"orange":"green";
if(it.qty<=it.min)low++;
l.innerHTML+=`
<div class="card">
<div class="row">
<img src="${it.img}">
<div style="flex:1">
<b>${it.name}</b>
<div class="small">${it.qty} ${it.unit}</div>
<span class="badge ${badge}">
${badge=="green"?"ƒê·ªß":badge=="orange"?"S·∫Øp h·∫øt":"H·∫øt"}
</span>
</div>
</div>
<button onclick="move(${i},1)">+ Nh·∫≠p</button>
<button class="danger" onclick="move(${i},-1)">- Xu·∫•t</button>
</div>`;
});
alert.innerText=low?`‚ö†Ô∏è ${low} m·∫∑t h√†ng s·∫Øp h·∫øt`:"T·∫•t c·∫£ ·ªïn ƒë·ªãnh";
receipt.innerHTML=out.map(o=>"<div>"+o+"</div>").join("");
}

function print(){window.print()}
render();
</script>
</body>
</html>
