<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no">
<title>Kho V6</title>

<style>
:root{
 --bg:#f2f2f7;--card:#fff;--text:#111;--sub:#666;
 --blue:#007aff;--red:#ff3b30;--radius:18px
}
@media(prefers-color-scheme:dark){
 :root{--bg:#000;--card:#1c1c1e;--text:#fff;--sub:#aaa}
}
*{font-family:-apple-system,BlinkMacSystemFont;box-sizing:border-box}
body{margin:0;background:var(--bg);color:var(--text)}
.hidden{display:none}
.card{
 background:var(--card);
 margin:14px;padding:16px;
 border-radius:var(--radius);
 box-shadow:0 8px 20px rgba(0,0,0,.08)
}
button,input{
 width:100%;padding:12px;margin-top:8px;
 font-size:16px;border-radius:14px;border:1px solid #ccc
}
button{background:var(--blue);color:#fff;border:none}
.header{display:flex;justify-content:space-between;align-items:center}
.item{display:flex;gap:12px;margin-top:12px}
.item img{
 width:70px;height:70px;border-radius:14px;
 object-fit:cover;background:#ccc
}
.badge{color:var(--red);font-weight:600}
#fab{
 position:fixed;right:20px;bottom:30px;
 width:60px;height:60px;border-radius:50%;
 background:var(--blue);color:#fff;
 font-size:34px;border:none
}
#login{
 position:fixed;inset:0;z-index:99;
 background:rgba(0,0,0,.55);
 backdrop-filter:blur(12px);
 display:flex;align-items:center;justify-content:center
}
</style>
</head>

<body>

<div id="login">
 <div class="card">
  <h2>üîê Nh·∫≠p m·∫≠t kh·∫©u</h2>
  <input type="password" id="pass" placeholder="M·∫≠t kh·∫©u">
  <button onclick="login()">M·ªü</button>
 </div>
</div>

<div id="app" class="hidden">
 <div class="card header">
  <h2>üì¶ Qu·∫£n l√Ω kho</h2>
  <span>V6</span>
 </div>

 <div class="card">
  üì¶ M·∫∑t h√†ng: <b id="total">0</b><br>
  ‚ö†Ô∏è S·∫Øp h·∫øt: <b id="low">0</b>
 </div>

 <div class="card">
  <input placeholder="üîç T√¨m m·∫∑t h√†ng..." oninput="search(this.value)">
 </div>

 <div id="list"></div>
</div>

<button id="fab" onclick="add()">+</button>
<input type="file" id="img" accept="image/*" hidden>

<script>
const PASS="1234";
let items=JSON.parse(localStorage.getItem("khoV6")||"[]");

if(localStorage.getItem("logged")) start();

function login(){
 if(pass.value===PASS){
  localStorage.setItem("logged",1);
  start();
 } else alert("Sai m·∫≠t kh·∫©u");
}
function start(){
 login.style.display="none";
 app.classList.remove("hidden");
 render();
}
function save(){
 localStorage.setItem("khoV6",JSON.stringify(items));
 render();
}
function add(){
 let name=prompt("T√™n m·∫∑t h√†ng");
 if(!name)return;
 let qty=parseInt(prompt("S·ªë l∆∞·ª£ng")||0);
 img.onchange=e=>{
  let f=e.target.files[0];
  if(!f)return;
  let r=new FileReader();
  r.onload=()=>{
   items.push({id:Date.now(),name,qty,img:r.result});
   save();
  };
  r.readAsDataURL(f);
 };
 img.click();
}
function del(id){
 if(confirm("Xo√°?")){
  items=items.filter(i=>i.id!==id);
  save();
 }
}
function search(k){
 document.querySelectorAll(".item").forEach(d=>{
  d.style.display=d.innerText.toLowerCase().includes(k.toLowerCase())?"":"none";
 });
}
function render(){
 list.innerHTML="";
 total.innerText=items.length;
 low.innerText=items.filter(i=>i.qty<=5).length;
 items.forEach(i=>{
  let d=document.createElement("div");
  d.className="card item";
  d.innerHTML=`
   <img src="${i.img}">
   <div style="flex:1">
    <b>${i.name}</b><br>
    SL: ${i.qty} ${i.qty<=5?'<span class="badge">‚ö†Ô∏è s·∫Øp h·∫øt</span>':''}
    <div>
     <button onclick="window.print()">üßæ In</button>
     <button onclick="del(${i.id})" style="background:#eee;color:#000">üóë Xo√°</button>
    </div>
   </div>`;
  list.appendChild(d);
 });
}
</script>

</body>
</html>
